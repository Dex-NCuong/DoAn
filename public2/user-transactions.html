<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lịch sử giao dịch - Web Đọc Truyện</title>
    <link rel="stylesheet" href="css/styles.css" />
    <link rel="stylesheet" href="css/profile.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
    />
    <script src="js/header.js"></script>
  </head>
  <body>
    <!-- Main Content -->
    <main>
      <div class="container">
        <div class="profile-container">
          <div class="profile-sidebar">
            <div class="user-info">
              <div class="avatar">
                <i class="fas fa-user-circle"></i>
              </div>
              <h3 id="username">Tên người dùng</h3>
              <p>
                <i class="fas fa-coins" style="color: #ffc107"></i>
                <span id="user-coins">0</span>
              </p>
            </div>
            <ul class="sidebar-menu">
              <li>
                <a href="profile.html"
                  ><i class="fas fa-user"></i> Thông tin tài khoản</a
                >
              </li>
              <li>
                <a href="user-followed.html"
                  ><i class="fas fa-bookmark"></i> Truyện đang theo dõi</a
                >
              </li>
              <li>
                <a href="user-history.html"
                  ><i class="fas fa-history"></i> Lịch sử đọc truyện</a
                >
              </li>
              <li>
                <a href="user-coins.html"
                  ><i class="fas fa-coins"></i> Nạp xu</a
                >
              </li>
              <li class="active">
                <a href="user-transactions.html"
                  ><i class="fas fa-exchange-alt"></i> Lịch sử giao dịch</a
                >
              </li>
              <li>
                <a href="#" id="logout-btn"
                  ><i class="fas fa-sign-out-alt"></i> Đăng xuất</a
                >
              </li>
            </ul>
          </div>
          <div class="profile-content">
            <div class="section-header">
              <h2><i class="fas fa-exchange-alt"></i> Lịch sử giao dịch</h2>
            </div>

            <div class="transaction-summary">
              <div class="summary-card income">
                <div class="summary-icon">
                  <i class="fas fa-plus-circle"></i>
                </div>
                <div class="summary-info">
                  <h3>Tổng nạp</h3>
                  <p>
                    <span id="total-income">0</span>
                    <i class="fas fa-coins" style="color: #ffc107"></i>
                  </p>
                </div>
              </div>

              <div class="summary-card expense">
                <div class="summary-icon">
                  <i class="fas fa-minus-circle"></i>
                </div>
                <div class="summary-info">
                  <h3>Tổng chi</h3>
                  <p>
                    <span id="total-expense">0</span>
                    <i class="fas fa-coins" style="color: #ffc107"></i>
                  </p>
                </div>
              </div>

              <div class="summary-card balance">
                <div class="summary-icon">
                  <i class="fas fa-wallet"></i>
                </div>
                <div class="summary-info">
                  <h3>Số dư</h3>
                  <p>
                    <span id="current-balance">0</span>
                    <i class="fas fa-coins" style="color: #ffc107"></i>
                  </p>
                </div>
              </div>
            </div>

            <div class="transaction-filters">
              <div class="filter-group">
                <label for="filter-type">Loại giao dịch:</label>
                <select id="filter-type" class="form-control">
                  <option value="all">Tất cả giao dịch</option>
                  <option value="deposit">Nạp xu</option>
                  <option value="purchase">Mua chương</option>
                </select>
              </div>

              <div class="filter-group">
                <label for="filter-from-date">Từ:</label>
                <input type="date" id="filter-from-date" class="form-control" />
              </div>

              <div class="filter-group">
                <label for="filter-to-date">Đến:</label>
                <input type="date" id="filter-to-date" class="form-control" />
              </div>

              <div class="filter-buttons">
                <button id="apply-filter" class="btn btn-primary btn-sm">
                  Lọc
                </button>
                <button id="reset-filter" class="btn btn-secondary btn-sm">
                  Đặt lại
                </button>
              </div>
            </div>

            <div class="transactions-container">
              <div id="loading" class="loading-indicator">
                <i class="fas fa-spinner fa-spin"></i> Đang tải lịch sử giao
                dịch...
              </div>

              <table id="transactions-table" class="transactions-table">
                <thead>
                  <tr>
                    <th>Thời gian</th>
                    <th>Loại giao dịch</th>
                    <th>Số xu</th>
                    <th>Trạng thái</th>
                  </tr>
                </thead>
                <tbody id="transaction-body">
                  <!-- Transactions will be loaded here dynamically -->
                </tbody>
              </table>

              <div
                id="no-transactions"
                class="empty-state"
                style="display: none"
              >
                <i class="fas fa-exchange-alt"></i>
                <h3>Chưa có giao dịch nào</h3>
                <p>
                  Bạn chưa có giao dịch nào. Hãy nạp xu để bắt đầu đọc truyện
                  VIP.
                </p>
                <a href="user-coins.html" class="btn btn-primary"
                  >Nạp xu ngay</a
                >
              </div>

              <div class="pagination" id="pagination">
                <!-- Pagination will be added here dynamically -->
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- Footer -->
    <footer>
      <div class="container">
        <div class="footer-content">
          <div class="footer-section">
            <h3>Web Đọc Truyện</h3>
            <p>
              Trang web đọc truyện chữ online miễn phí với nhiều thể loại đa
              dạng.
            </p>
          </div>
          <div class="footer-section">
            <h3>Liên kết</h3>
            <ul>
              <li><a href="index.html">Trang chủ</a></li>
              <li><a href="stories.html">Danh sách truyện</a></li>
              <li><a href="about.html">Giới thiệu</a></li>
              <li><a href="contact.html">Liên hệ</a></li>
            </ul>
          </div>
          <div class="footer-section">
            <h3>Liên hệ</h3>
            <p><i class="fas fa-envelope"></i> Email: info@truyenhay.com</p>
            <p><i class="fas fa-phone"></i> Điện thoại: 0123 456 789</p>
            <div class="social-icons">
              <a href="#"><i class="fab fa-facebook"></i></a>
              <a href="#"><i class="fab fa-twitter"></i></a>
              <a href="#"><i class="fab fa-instagram"></i></a>
            </div>
          </div>
        </div>
        <div class="footer-bottom">
          <p>&copy; 2023 Web Đọc Truyện. Tất cả quyền được bảo lưu.</p>
        </div>
      </div>
    </footer>

    <script src="js/auth.js"></script>
    <script src="js/user-transactions.js"></script>
  </body>
</html>
